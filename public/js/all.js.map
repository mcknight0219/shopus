{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["$(document).ready(function() {\n\n    if( location.pathname === '/cms/login' || location.pathname === '/cms/register' ) { \n\n        $(\".borderedbutton\").click(function() {\n            var email = $('#email').val();\n            var pass  = $('#password').val();\n            if( !_validateEmail(email) ) {\n                $('#email').webuiPopover({\n                    content: 'Email entered is not correct',\n                    placement: 'bottom',\n                    trigger: 'manual',\n                    dismissible: true,\n                    autoHide: 2500\n                });\n                $('#email').webuiPopover('show');\n\n                return;\n            }\n\n            if( !_validatePassword(pass) ) {\n                $('#password').webuiPopover({\n                    content: 'Password must be at least six letters long and contain valid ascii letters',\n                    placement: 'bottom',\n                    trigger: 'manual',\n                    dismissible: true,\n                    autoHide: 2500\n                });\n                $('#password').webuiPopover('show');\n\n                return;\n            }\n\n            var pass2 = $('#passwordAgain').val();\n            // it's register page, check if retyped password agrees with original one\n            if( pass2 !== undefined ) {\n                if( pass !== pass2 ) {\n                    $('#passwordAgain').webuiPopover({\n                        content: 'Retyped password doesn\\'t match',\n                        placement: 'bottom',\n                        trigger: 'manual',\n                        dismissible: true,\n                        autoHide: 2500\n                    });\n                    $('#passwordAgain').webuiPopover('show');\n                    return;\n                }\n            }\n\n            $('form').submit();\n        });\n    }\n\n    // Remind user if no weixin id is associated\n    if( location.pathname === '/cms') {\n        _remindProfileEmpty();\n         // On Cms homepage, user can click to edit their profile\n        $('div#editProfile').click(function() {\n            window.location.href='/cms/profile/edit';        \n        });\n    \n        $('div#addProduct').click(function() {\n            window.location.href='/cms/products/add';\n        })\n        // Toggle fold/unfold\n        $('div#unfoldProduct').click(function() {\n            var klass = $('div#unfoldProduct > i').attr('class');\n            var dir = klass.match(/fa-chevron-(up|down)/)[1];\n            if( dir === 'up' ) {\n                klass = klass.replace(dir, 'down');\n            } else {\n                klass = klass.replace(dir, 'up');\n            }\n            $('div#unfoldProduct > i').attr('class', klass);\n        });\n    }\n\n    if( location.pathname === '/cms/profile/edit') {\n        if( $('form input[name=\"weixin\"]').val() !== \"\" ) {\n            $('form input[name=\"weixin\"]').prop('readonly', true);\n        }\n\n        // if there is default text already filled\n       ['address', 'city'].forEach(function(field) {\n            if( $('form input[name=\"' + field + '\"]').val() !== \"\" ) {\n                $('form input[name=\"' + field + '\"]').click(function() {\n                    $(this).select();\n                })\n            }\n       }); \n\n        $(\".borderedbutton\").click(function() {\n            if( $('form input[name=\"weixin\"]').val() === \"\" ) {\n                $('form input[name=\"weixin\"]').webuiPopover({\n                    content: 'Please link your Weixin ID',\n                    placement: 'bottom-right',\n                    trigger: 'manual',\n                    dismissible: true,\n                    autoHide: 4500\n                }).webuiPopover('show');\n                \n                return;\n            }\n            $('form').submit();\n        });\n    }\n});\n\nfunction _validateEmail(email) {\n    var re = /^\\S+@\\S+$/;\n    return email.match(re) !== null;\n};\n\nfunction _validatePassword(pass) {\n    if( pass.length < 6 ) return false;\n    var re = /[\\x00-\\x7f]/; \n    for( var i = 0; i < pass.length; ++i ) {\n        if( !re.test(pass.charAt(i)) ) return false;\n    }\n    return true;\n};\n\nfunction _remindProfileEmpty() {\n    if( $('#profileWeixinId').text() === '' ) {\n       $('div#editProfile').webuiPopover({\n            content: 'Go here to complete your profile !',\n            placement: 'bottom-left',\n            trigger: 'manual',\n            dimissible: true,\n            autoHide: 4500,\n            closeable: true\n       }).webuiPopover('show'); \n    }\n}"],"sourceRoot":"/source/"}